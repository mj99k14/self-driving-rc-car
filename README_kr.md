# 🚗 Jetson Nano 기반 자율주행 RC카 프로젝트

> **딥러닝 + 임베디드 시스템 + 하드웨어 제어**를 통한 라인트래킹 RC카 구현  
> 🎓 졸업 프로젝트 / 공모전 / 포트폴리오용 최적화

---

## 🧠 프로젝트 개요

Jetson Nano와 카메라, 모터를 활용하여 도로의 라인을 실시간으로 인식하고  
CNN 기반의 딥러닝 모델로 조향 각도를 예측하여 RC카를 자율주행시키는 프로젝트입니다.

- 라인 인식 → 조향 제어 → 속도 조절까지 전체 자동화
- 실시간 영상 처리 + 하드웨어 제어 동시 수행 (멀티쓰레딩 기반)

---

## 🎥 시연 영상

> 실제 자율주행에 성공한 결과 영상입니다 (Jetson Nano + 모델 직접 학습)

![デモGIF](./jetson_rc_car_demo.gif)   
🔗 [전체영상 보기 (mp4)](https://github.com/mj99k14/self-driving-rc-car/raw/main/video/jetson_autopilot_demo.mp4)


---

## 🛠 기술 스택 및 사용 도구

| 분류 | 도구 |
|------|------|
| 💻 언어 | Python 3.8 |
| 🎥 영상 처리 | OpenCV 4.10.0 |
| 🧠 딥러닝 | PyTorch, PilotNet 구조 |
| ⚙️ 하드웨어 | Jetson Nano, 서보모터, DC모터, L298N |
| 🧪 OS & 라이브러리 | Ubuntu 18.04 + JetPack 4.6.1, CUDA 10.2, cuDNN 8.2 |

---

## 📂 프로젝트 구조

```
Autonomous-Vehicle-Project/
├── model/             # 학습된 모델
├── data/              # 수집한 이미지 및 라벨링 데이터
├── src/
│   ├── camera.py
│   ├── model_infer.py
│   ├── steering.py
│   ├── speed.py
├── utils/
├── test/
└── README.md
```

---

## 💡 핵심 구현 기능

### 📷 실시간 라인 인식
- OpenCV로 영상 수집 및 전처리
- Canny edge detection + CNN 기반 예측

### 🕹 조향/속도 제어
- 서보모터로 방향 조절 (PWM 신호)
- DC모터로 속도 제어 (정방향/역방향 + 가속/감속)

### 🧵 멀티쓰레드 시스템
- 영상 인식과 모터 제어를 동시에 비동기 실행

---

## 🔧 신경 쓴 부분 / 기술적 고민

- **멀티스레딩 적용**  
  Jetson Nano의 한정된 리소스에서도 실시간 추론과 안정적인 모터 제어가 가능하도록,  
  영상 인식과 모터 제어를 병렬로 처리하는 **멀티스레드 구조**를 설계하여 반응성과 안정성을 확보했습니다.

- **과적합 방지를 위한 데이터 수집 및 구성 전략**  
  과적합을 막기 위해, 다양한 조도와 곡선 구간에서 **새로운 주행 데이터를 별도로 수집**하였으며,  
  학습 데이터에 포함된 환경의 다양성을 확보하기 위해 **데이터 증강(회전, 밝기 조절, 노이즈 추가)** 기법도 병행했습니다.

- **불필요한 정보 제거를 통한 학습 집중 유도**  
  수집한 이미지에서 상단 30%를 제거함으로써 하늘, 건물 등 **노이즈가 될 수 있는 배경 정보를 제거**하고,  
  모델이 도로 정보에 집중해 학습할 수 있도록 전처리 과정에서 세밀하게 조정하였습니다.

- **데이터 불균형 대응**  
  조향 각도를 30°, 60°, 90°, 120°, 150°로 나누어 데이터를 수집했지만, 실제 도로에서는 90° 주행이 가장 많이 발생했습니다.  
  이로 인해 데이터 불균형이 생기는 것을 방지하기 위해 **90° 데이터를 기준으로 다른 각도의 샘플 수를 맞추어 학습 데이터셋을 재구성**하였습니다.  
  이를 통해 모델이 특정 방향에만 치우치지 않고 **균형 잡힌 예측 성능**을 가질 수 있도록 설계했습니다.

---

## 📊 학습 및 성능

- 모델 구조: CNN 기반 PilotNet (5 Conv + 4 FC)
- 학습 데이터: 약 13,362장 (5종 조향 각도 라벨)
- 최종 Validation Loss: `0.2107`
- 자율주행 성공률 (테스트 기준): 약 78.8%
- 향후 성능 최적화 완료 모델: `pilotnet_model_optimized.pth`

---

## 📌 프로젝트 성과

✅ 실내 트랙 자율주행 성공  
✅ 곡선 구간 주행 개선 (데이터 증강 + 튜닝)  
✅ GPU 가속 기반 실시간 영상 추론 적용  
✅ Jetson GPIO 제어 + PWM 신호 활용한 정밀 제어

---

## 📎 기타 참고 자료

- GitHub 저장소: [프로젝트 코드 보러가기](https://github.com/mj99k14/Autonomous-Vehicle-Project)

---

## 🙋 만든 사람

| 이름 | 역할 |
|------|------|
| 김민정 | 전체 시스템 설계, 모델 학습, Jetson 제어 |
