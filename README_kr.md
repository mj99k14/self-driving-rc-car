
# 🚘 자율주행 RC카 시스템

이 프로젝트의 README는 다음 언어로 제공됩니다.  
언어를 선택하세요:

🇯🇵 [일본어판 보기](README.md)  
🇰🇷 한국어 (현재 표시 중)

---

# 🚗 Jetson Nano 기반 자율주행 RC카 프로젝트

> **Jetson Nano + PyTorch + OpenCV**를 활용한 라인 추적형 자율주행 RC카  
> 실시간 라인 인식, 조향, 속도 제어까지 자동화 구현

---

## 🧠 프로젝트 개요

Jetson Nano, 카메라, DC/서보 모터를 사용해 도로의 라인을 실시간으로 인식하고,  
CNN 기반 딥러닝 모델(PilotNet)로 조향각을 예측하여 자율주행을 수행하는 프로젝트입니다.

---

## 🎬 실행 영상 (데모)

![데모GIF](./jetson_rc_car_demo.gif)  
> Jetson Nano 기반 실시간 추론 및 자율 조향 성공 장면

🔗 [전체 영상 보기 (mp4)](https://github.com/mj99k14/self-driving-rc-car/raw/main/video/jetson_autopilot_demo.mp4)

---

## 🛠 사용 기술

| 분류 | 도구 |
|------|------|
| 프로그래밍 언어 | Python 3.8 |
| 딥러닝 | PyTorch + PilotNet |
| 영상 처리 | OpenCV 4.10.0 |
| 하드웨어 | Jetson Nano, DC모터, 서보모터, L298N |
| OS/환경 | Ubuntu 18.04 + JetPack 4.6.1, CUDA 10.2 |

---

## 💡 주요 구현 기능

- 📷 **라인 인식**: OpenCV + CNN을 통한 도로 중심선 탐지  
- 🕹 **조향/속도 제어**: PWM 신호 기반 모터 제어  
- 🔀 **멀티스레드 처리**: 영상 분석과 제어 병렬 처리  
- 🧠 **자체 학습 모델**: 13,362장의 이미지로 PilotNet 모델 최적화

---

## 🔧 신경 쓴 부분 / 기술적 고민

- **병목 해결을 위한 멀티스레드 구조 개선**  
  멀티스레드 구조 적용 및 병목 해결
  초기에는 영상 처리와 모터 제어를 하나의 루프 내에서 순차적으로 수행했으나,
  추론 지연 시 제어 명령이 늦게 반영되는 병목 현상이 발생했습니다.
  이를 해결하기 위해 멀티스레드 구조를 도입하여,
  영상 추론과 하드웨어 제어를 별도 스레드로 분리하고 비동기 처리함으로써
  Jetson Nano의 리소스를 효율적으로 분산 사용하고, 실시간성 + 안정성을 확보했습니다.

- **조향 각도 라벨링 및 데이터 수집**  
  서보 모터의 조향 각도를 30°, 60°, 90°, 120°, 150°의 5단계로 나누어 라벨링하고,  
  각 각도에 대응하는 주행 영상을 수집하여 모델 학습에 활용했습니다.

- **과적합 방지를 위한 추가 데이터 수집**  
  다양한 밝기와 주행 각도를 고려하여 자체 데이터를 추가 수집하고,  
  회전·노이즈 추가 등의 데이터 증강을 수행했습니다.

- **노이즈 제거 전처리**  
  학습 이미지의 상단 30%를 제거하여 모델이 도로 영역에 집중해 학습할 수 있도록 조정했습니다.

- **데이터 불균형 해소**  
  실제 주행에서는 90° 직진 데이터가 가장 많기 때문에,  
  그 수에 맞춰 다른 각도의 데이터 수도 조정하여 학습 데이터의 균형을 맞췄습니다.

---

## 📈 성과 및 성능

- 모델 구조: CNN 기반 PilotNet (5개의 Convolution + 4개의 Fully Connected 계층)
- 학습 데이터: 13,362장 (조향 각도 라벨: 30°, 60°, 90°, 120°, 150°)
- 최종 Validation Loss: **0.2107**
- 테스트 환경 기준 자율주행 성공률: **78.8%**
- 곡선 구간 인식 향상을 위한 데이터 증강 및 하이퍼파라미터 조정 수행
- 실내 트랙 기반 안정적인 자율주행 성공  
- Jetson GPU 기반 실시간 추론 구현  
- Jetson GPIO + PWM 제어를 통한 정밀 조향 가능
- 최적화된 최종 모델 파일: `pilotnet_model_optimized.pth`

---

## 📂 프로젝트 구조

```
self-driving-rc-car/
├── Completion/              # 프로젝트 정리본
│   ├── code/                # 메인 실행 코드
│   ├── data conversion/     # 데이터 변환 관련 코드
│   ├── data preprocessing/  # 데이터 전처리 코드
│   └── Model/               # 학습된 모델 또는 모델 정의 관련 파일
│
├── data/                    # 데이터셋 (예: MNIST, csv 등)
│   ├── MNIST/raw/
│   └── training_data_updated.csv
│
├── Practice/                # 실험용 코드 및 기능별 테스트 스크립트
│   ├── 증강/
│   ├── PilotNet 관련 스크립트
│   ├── 각도 저장, 분류, 전처리 등 기능별 Python 파일
```
```

---

## 🙋 만든 사람

| 이름 | 역할 |
|------|------|
| 김민정 | 전체 설계 / 모델 학습 / Jetson 제어 |
